// deklaracja zmiennych dla pinów
const int sensorpin = A0;
const int sensorpower = 8;
const int pumppin = 11;

// zmienna do odczytu czujnika
int sensor;

// czas opóźnienia między odczytami czujnika
const int delayTime = 1000;  // Delay zwiększony na jedną sekundę

// "wet" and "dry" progi - wymagają ustawienia
int wet = 900;
int dry = 600;

void setup() { // code that only runs once
  // ustaw piny jako wyjścia
  pinMode(sensorpower, OUTPUT);
  pinMode(pumppin, OUTPUT);
  
  // initialize serial communication
  Serial.begin(9600);
}

void loop() { 
  // włączyć czujnik i odczekać chwilę
  digitalWrite(sensorpower, HIGH);
  delay(10);
  
  // odczyt z czujnika
  sensor = analogRead(sensorpin);
  
  // wyłącz czujnik, aby zapobiec korozji
  digitalWrite(sensorpower, LOW);
  
  // wydruk odczytu czujnika
  Serial.println(sensor);
  
  // Jeśli odczyt czujnika jest większy niż próg "wet",
  // włączyć pompę. Jeśli jest mniejszy niż próg "dry"
  // próg, włącz pompę. 
  // Jeśli jest pomiędzy tymi dwiema wartościami, nie rób nic.
  if (sensor > wet || sensor < dry) {
    digitalWrite(pumppin, HIGH);
  } else {
    digitalWrite(pumppin, LOW);
  }
  
  // wait before taking next reading
  delay(delayTime);
}
